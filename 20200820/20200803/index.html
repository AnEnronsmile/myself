<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/index.css">
</head>

<body>
    <!-- 侧边栏布局 -->
    <div class="sidebar">
        <!-- 底下的那个div -->
        <div class="con">
            <!-- 上面的div -->
            <div class="inner">
                <!-- 定位面包屑 -->
                <div class="conImg">
                    <img src="./img/list.png" alt="" class="one">
                    <img src="./img/cross.png" alt="" class="two">
                </div>
               
               



        </div>
         <!-- 定位精灵图 -->
         <div class="Spritemap">
            <ul>
                <li>
                    <p></p>
                </li>
                <li><p></p></li>
                <li><p></p></li>
                <li><p></p></li>
                <li><p></p></li>
                <li><p></p></li>
            </ul>
        </div>
         <!-- 回到顶部的图片 -->
         <div class="botton"></div>
        </div>
    </div>
    <div class="outer">
        <!-- <div class="leftNav">
            <div></div>
        </div> -->
        <!-- 头部区域 -->
        <header class="header">
            <!-- 上半部分 -->
            <div class="top">
                <!-- 内容分为左右 -->
                <div class="con">
                    <div class="left">
                        <p>
                            尚品汇欢迎您
                        </p>
                        <p>
                            <span>请</span>
                            <a href="javascritp:;">登录</a>
                            <a href="javascriot:;">免费注册</a>
                        </p>
                    </div>
                    <div class="right">
                        <a href="javascript:;">我的订单</a>
                        <a href="javascript:;">我的购物车</a>
                        <a href="javascript:;">我的尚品汇</a>
                        <a href="javascript:;">尚品汇会员</a>
                        <a href="javascript:;">企业采购</a>
                        <a href="javascript:;">关注尚品汇</a>
                        <a href="javascript:;">合作招聘</a>
                        <a href="javascript:;">商家后台</a>
                    </div>
                </div>
            </div>
            <!-- 下半部分 -->
            <div class="bottom">
                <!-- 内容  左右 -->
                <div class="left">
                    <a href="javascript:;"><img src="./img/Logo.png" alt=""></a>
                </div>
                <div class="right">
                    <input type="text" class="inp">
                    <button>搜索</button>
                </div>
            </div>
        </header>
        <div class="tapyNav">
            <div class="conNav">
                <h2>所有商品分类</h2>
                <nav>
                    <a href="javascriot:;">服装城</a>
                    <a href="javascriot:;">美妆馆</a>
                    <a href="javascriot:;">尚品汇超市</a>
                    <a href="javascriot:;">全球购</a>
                    <a href="javascriot:;">闪购</a>
                    <a href="javascriot:;">团购</a>
                    <a href="javascriot:;">有趣</a>
                    <a href="javascriot:;">秒杀</a>
                </nav>
            </div>
        </div>
        <!-- 放大镜区域 -->
        <div class="con">
            <div class="out">
                <!-- 路径导航 -->
                <div class="piont">
                    <a href="javascript:;">手机、数码、通信</a>
                    <a href="javascript:;">手机</a>
                    <a href="javascript:;">Apple苹果</a>
                    <a>iPhone6s</a>
                </div>
                <!-- 左块 -->
                <!-- 上下两块 -->
                <div class="mainCon">
                    <!-- 上边的放大镜 -->
                    <div class="shang">
                        <div class="previewArea">
                            <!-- 小图 -->
                            <div class="minimg">
                                <!-- 图片 -->
                                <img src="" alt="">
                                <!-- 蒙版位置 -->
                            </div>
                            <!-- 大图位置 -->
                        </div>
                        <!-- 下面的轮播图 -->
                        <div class="specScroll">
                            <a href="javascript:;" class="prev">&lt;</a>
                            <div class="items">
                                <div class="itemsCon">
                                    <img src="./img/s1.png" alt="">
                                    <img src="./img/s2.png" alt="">
                                    <img src="./img/s3.png" alt="">
                                    <img src="./img/s1.png" alt="">
                                    <img src="./img/s2.png" alt="">
                                    <img src="./img/s3.png" alt="">
                                    <img src="./img/s1.png" alt="">
                                    <img src="./img/s2.png" alt="">
                                    <img src="./img/s3.png" alt="">
                                    <img src="./img/s1.png" alt="">
                                </div>
                            </div>
                            <a href="javascript:;" class="next">&gt;</a>
                        </div>
                    </div>
                    <!--右块  -->
                    <div class="ringcon">
                        <div class="info">
                        </div>
                        <div class="choose">
                            <div class="chooseArea">
                                <div class="chooseCon"></div>
                                <!-- <dl>
                                    <dt>选择颜色</dt>
                                    <dd>金色</dd>
                                    <dd>银色</dd>
                                    <dd>黑色</dd>
                                </dl>
                                <dl>
                                    <dt>内存容量</dt>
                                    <dd>16G</dd>
                                    <dd>64G</dd>
                                    <dd>128G</dd>
                                    <dd>256G</dd>
                                </dl>
                                <dl>
                                    <dt>选择版本</dt>
                                    <dd>公开版</dd>
                                    <dd>移动版</dd>
                                </dl>
                                <dl>
                                    <dt>购买方式</dt>
                                    <dd>官方标配</dd>
                                    <dd>移动优惠版</dd>
                                    <dd>联通优惠版</dd>
                                </dl> -->
                            </div>
                            <div class="cartArea">
                                <div class="controls">
                                    <input type="text" value="1" style="text-align: center;">
                                    <a href="javascript:;" class="plus">+</a>
                                    <a href="javascript:;" class="mins">-</a>
                                </div>
                                <div class="add">
                                    <a href="">加入购物车</a>

                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
        <!-- 商品详情展示页 -->
        <div class="productDetial">
            <aside class="aside">
                <div class="tabTitle">
                    <h4 class="active">相关分类</h4>
                    <h4>推荐品牌</h4>
                </div>
                <div class="tabContent">
                    <div class="tab-pane active">
                        <ul class='partList'>
                            <li><a href="javascript:;"> 手机</a></li>
                            <li><a href="javascript:;">手机壳</a></li>
                            <li><a href="javascript:;">内存卡</a></li>
                            <li><a href="javascript:;">Iphone配件</a></li>
                            <li><a href="javascript:;">贴膜</a></li>
                            <li><a href="javascript:;">手机耳机</a></li>
                            <li><a href="javascript:;">移动电源</a></li>
                            <li><a href="javascript:;">平板电脑</a></li>
                        </ul>
                        <ul class="goodList">
                            <li>
                                <div class="detailImg"><img src="./img/part01.png" alt=""></div>
                                <h4>Apple苹果iPhone 6s (A1699)</h4>
                                <p>¥6088.00</p>
                                <div class="addCart"><a href="">加入购物车</a></div>
                            </li>
                            <li>
                                <div class="detailImg"><img src="./img/part01.png" alt=""></div>
                                <h4>Apple苹果iPhone 6s (A1699)</h4>
                                <p>¥6088.00</p>
                                <div class="addCart"><a href="">加入购物车</a></div>
                            </li>
                            <li>
                                <div class="detailImg"><img src="./img/part01.png" alt=""></div>
                                <h4>Apple苹果iPhone 6s (A1699)</h4>
                                <p>¥6088.00</p>
                                <div class="addCart"><a href="">加入购物车</a></div>
                            </li>
                            <li>
                                <div class="detailImg"><img src="./img/part01.png" alt=""></div>
                                <h4>Apple苹果iPhone 6s (A1699)</h4>
                                <p>¥6088.00</p>
                                <div class="addCart"><a href="">加入购物车</a></div>
                            </li>
                        </ul>
                    </div>
                    <div class="tab-pane">
                        推荐品牌
                    </div>
                </div>
            </aside>
            <div class="detail">
                <div class="fitting">
                    <h4 class="kt">选择搭配</h4>
                    <div class="good-suits">
                        <div class="master">
                            <img src="./img/l-m01.png" alt="">
                            <p>¥5299</p>
                            <i>+</i>
                        </div>
                        <ul class="suits">
                            <li class="suitsItem">
                                <img src="./img/dp01.png" alt="">
                                <p>Feless费勒斯VR</p>
                                <label>
                                    <input type="checkbox" value="39">
                                    <span>39</span>
                                </label>
                            </li>
                            <li class="suitsItem">
                                <img src="./img/dp02.png" alt="">
                                <p>Feless费勒斯VR</p>
                                <label>
                                    <input type="checkbox" value="50">
                                    <span>50</span>
                                </label>
                            </li>
                            <li class="suitsItem">
                                <img src="./img/dp03.png" alt="">
                                <p>Feless费勒斯VR</p>
                                <label>
                                    <input type="checkbox" value="59">
                                    <span>59</span>
                                </label>
                            </li>
                            <li class="suitsItem">
                                <img src="./img/dp04.png" alt="">
                                <p>Feless费勒斯VR</p>
                                <label>
                                    <input type="checkbox" value="99">
                                    <span>99</span>
                                </label>
                            </li>
                        </ul>
                        <div class="result">
                            <div class="num">已选购0件商品</div>
                            <p class="price-tit">套餐价</p>
                            <p class="price">¥5299</p>
                            <button class="addShopcar">加入购物车</button>
                        </div>
                    </div>
                </div>
                <div class="intro">
                    <ul class="tab-wraped">
                        <li class="active">
                            <a href="###">商品介绍</a>
                        </li>
                        <li class="">
                            <a href="###">规格与包装</a>
                        </li>
                        <li class="">
                            <a href="###">售后保障</a>
                        </li>
                        <li class="">
                            <a href="###">商品评价</a>
                        </li>
                        <li class="">
                            <a href="###">手机社区</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div id="one" class="tab-pane active">
                            <ul class="goods-intro">
                                <li>分辨率：1920*1080(FHD)</li>
                                <li>后置摄像头：1200万像素</li>
                                <li>前置摄像头：500万像素</li>
                                <li>核 数：其他</li>
                                <li>频 率：以官网信息为准</li>
                                <li>品牌： Apple</li>
                                <li>商品名称：APPLEiPhone 6s Plus</li>
                                <li>商品编号：1861098</li>
                                <li>商品产地：中国大陆</li>
                                <li>商品毛重：0.51kg</li>
                                <li>热点：指纹识别，Apple Pay，金属机身，拍照神器</li>
                                <li>系统：苹果（IOS）</li>
                                <li>像素：1000-1600万品毛重：0.51kg</li>
                                <li>机身内存：64GB</li>
                            </ul>
                            <div class="intro-detail">
                                <img src="./img/intro01.png" alt="">
                                <img src="./img/intro02.png" alt="">
                                <img src="./img/intro03.png" alt="">
                            </div>
                        </div>
                        <div id="two" class="tab-pane">规格与包装</div>
                        <div id="three" class="tab-pane">售后保障</div>
                        <div id="four" class="tab-pane">商品评价</div>
                        <div id="five" class="tab-pane">手机社区</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="./js/shangphui.js"></script>
    <script>
        //节点加载完成后执行
        window.addEventListener('DOMContentLoaded', function () {
            var imgsrc = shangphui.imgsrc;
            var imgsrcIndex = 0;
            magnifier();

            // 侧边栏进出   
            sidebar();

            function sidebar() {
                var Osidebar = document.querySelector('.sidebar');
                var oSidebarImg = document.querySelector('.sidebar .conImg');
                var one1 = document.querySelector('.sidebar .one');
                var one2 = document.querySelector('.sidebar .two');
            
                var switch1 = false;
                oSidebarImg.onclick = function () {

                    if (!switch1) {
                        Osidebar.style.right = 0;
                        one1.style.display='none';
                        one2.style.display='block';
                    }else{
                        Osidebar.style.right = -296+'px';
                        one1.style.display='block';
                        one2.style.display='none';
                    }
                    switch1=!switch1;

                }
            }

            // 雪碧图的动画
            Spritemap();
           
            function Spritemap() {
               var OSpritemap = document.querySelectorAll('.Spritemap li');
               var Op = document.querySelectorAll('.Spritemap p');
                   OSpritemap.forEach(function (itme,index) {
                       itme.onmouseenter=function(){
                        Op[index].style.left=-100+'px';
                       }
                   })
                   OSpritemap.forEach(function (itme,index) {
                       itme.onmouseleave=function(){
                        Op[index].style.left=35+'px';
                       }
                   })

            }
            bottontop();
           function bottontop (){
            var bottontop=document.querySelector('.botton');
            var a = null;
            bottontop.onclick=function(){
                
             a = setInterval(function(){
                    document.documentElement.scrollTop-=10;
                    if(document.documentElement.scrollTop<=0){
                    clearInterval(a);
                }
                },1000/60)
              
            }
            
            
           }
            function magnifier() {
                // 修改img为动态
                var oMinimgsrc = document.querySelector('.minimg img');
                oMinimgsrc.src = imgsrc[imgsrcIndex].s;
                //鼠标移入时  创建一个2div元素
                var datu = null;
                var mengban = null;
                var datuimg = null;
                var oMinimg = document.querySelector('.minimg');
                var oPreviewArea = document.querySelector('.previewArea');
                //鼠标移入事件
                oMinimg.onmouseenter = function () {
                    //创建元素
                    mengban = document.createElement('div');
                    datu = document.createElement('div');
                    datu.classList = 'datu';
                    datuimg = document.createElement('img');
                    datuimg.src = imgsrc[imgsrcIndex].s;
                    //插入元素
                    oMinimg.appendChild(mengban);
                    oPreviewArea.appendChild(datu);
                    datu.appendChild(datuimg);
                    //元素的位置 是 鼠标的位置 减去 蒙版的一半 减去 大图到窗口的距离
                    oMinimg.onmousemove = function (e) {
                        /* 
                            鼠标随时在蒙版的正中心
                            蒙版的位置：鼠标的clientX - 蒙版的一半 - 放大镜盒子距离窗口边缘的位置
                        */

                        //获取位置
                        var oMaskPoint = {
                            left: e.clientX - mengban.offsetWidth / 2 - oMinimg
                                .getBoundingClientRect().left,
                            top: e.clientY - mengban.offsetHeight / 2 - oMinimg
                                .getBoundingClientRect().top,

                        }
                        // 判断临界值
                        if (oMaskPoint.left <= 0) {
                            oMaskPoint.left = 0
                        } else if (oMaskPoint.left >= oMinimg.offsetWidth - mengban.offsetWidth) {
                            oMaskPoint.left = oMinimg.offsetWidth - mengban.offsetWidth
                        }
                        if (oMaskPoint.top <= 0) {
                            oMaskPoint.top = 0
                        } else if (oMaskPoint.top >= oMinimg.offsetHeight - mengban.offsetHeight) {
                            oMaskPoint.top = oMinimg.offsetHeight - mengban.offsetHeight
                        }
                        //赋值给蒙版
                        mengban.style.left = oMaskPoint.left + 'px';
                        mengban.style.top = oMaskPoint.top + 'px';
                        //计算大图的位置
                        //蒙版走的距离出去 元素的宽-蒙版的宽/图片的宽-元素的宽
                        var scal = (oMinimg.offsetWidth - mengban.offsetWidth) / (datuimg.offsetWidth -
                            datu.offsetWidth);
                        datuimg.style.left = -oMaskPoint.left / scal + 'px';
                        datuimg.style.top = -oMaskPoint.top / scal + 'px';
                    }



                }
                //鼠标移出时销毁
                oMinimg.onmouseleave = function () {
                    //删除创建元素
                    oMinimg.removeChild(mengban);
                    oPreviewArea.removeChild(datu);
                    //赋值null  释放内存
                    mengban = null;
                    datu = null;


                }
            }
            //获取非行内样式
            function getStyle(obj, attr) {
                if (obj.currentStyle) {
                    return obj.currentStyle[attr];
                } else {
                    return window.getComputedStyle(obj, null)[attr];
                }
            }
            //下面的轮播图


            //轮播图点击事件
            lunbotu();

            function lunbotu() {
                var oItemsCon = document.querySelectorAll('.specScroll .itemsCon img')
                oItemsCon.forEach(function (item, index) {
                    item.onclick = function () {
                        var oMinimg = document.querySelector('.minimg img');
                        oMinimg.src = this.src;
                        imgsrcIndex = index;
                    }
                })

            }
            // 左右移动事件
            thumbnali();

            function thumbnali() {
                var oLeftit = document.querySelector('.prev');
                var oLeftgt = document.querySelector('.next');
                var oItemsCon = document.querySelector('.itemsCon');
                var oItemsConimg = document.querySelectorAll('.itemsCon img')
                //鼠标点击左边
                //设置初始位置为0  走过的距离
                var templenght = 0;
                //容器能放5张图
                var view = 5;
                //总共能走的距离
                //               总共的图片       *       每张图的宽  加上margin
                var alllenght = (oItemsConimg.length - view) * (oItemsConimg[0].offsetWidth + parseInt(getStyle(
                    oItemsConimg[
                        0], 'marginRight')));
                //每次移动的距离
                var moveLength = 2 * (oItemsConimg[0].offsetWidth + parseInt(getStyle(
                    oItemsConimg[0], "marginRight")));

                // 图片左移动
                oLeftgt.onclick = function () {
                    //判断图片是否走完了                              
                    //判断 总距离 - 走过的距离  是否大于每次移动的距离
                    if (alllenght - templenght > moveLength) {
                        // 如果大于则  继续走
                        templenght += moveLength;
                    }
                    //否则 走过的距离  =  总距离
                    else {
                        templenght = alllenght;
                    }
                    oItemsCon.style.left = -templenght + 'px';


                }
                //图片右移动
                oLeftit.onclick = function () {
                    //判断 每次移动的距离如果小于初始位置
                    if (moveLength < templenght) {
                        // 继续走
                        templenght -= moveLength;
                    }
                    //否则 走过的距离  =  总距离
                    else {
                        templenght = 0;
                    }
                    oItemsCon.style.left = -templenght + 'px';

                }
            }


            goodDeta();

            function goodDeta() {
                // 获取js的数据
                var detaiData = shangphui.goodsDetail;
                var oInfo = document.querySelector('.ringcon .info')
                var star = `<h3>${detaiData.title}</h3>
                            <p class="news">${detaiData.recommend}</p>
                            <div class="priceArea">
                                <div class="priceArea1">
                                    <span>价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</span>
                                    <div class="price">
                                        <span class="size16">￥</span>
                                        <span class="size24">${detaiData.price}</span>
                                        <span class="size16">元</span>
                                    </div>
                                </div>
                                <div class="priceArea12">
                                    <span>促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</span>

                                    <p><span>${detaiData.promoteSales.type}</span>
                                        ${detaiData.promoteSales.content}
                                    </p>
                                </div>
                            </div>
                            <div class="support">
                                <div class="support1">
                                    <span>支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</span>
                                    <p>${detaiData.support}</p>
                                </div>
                                <div class="support2">
                                    <span>配&nbsp;送&nbsp;至</span>
                                    <p>${detaiData.address}</p>
                                </div>
                            </div>
                `;

                oInfo.innerHTML = star;

            }

            // 动态商品选择详情

            screening();

            function screening() {
                //获取js数据
                var CrumbData = shangphui.goodsDetail.crumbData;
                var jiahao = document.querySelector('.plus');
                var jianhao = document.querySelector('.mins');
                var he = document.querySelector('.controls input')

                // 等dl dt dd  全部创建好了在插入chooseArea中
                var oChooseArea = document.querySelector('.chooseArea')
                // 遍历数据  用来生成dl
                CrumbData.forEach(function (item, index) {

                    var oDl = document.createElement('dl');
                    var oDt = document.createElement('dt');
                    oDt.innerHTML = item.title;
                    oDl.appendChild(oDt);
                    item.data.forEach(function (item, index) {
                        var oDd = document.createElement('dd')
                        oDd.innerHTML = item.type;
                        oDd.dataset.price = item.changePrice;
                        oDl.appendChild(oDd);
                    })
                    oChooseArea.appendChild(oDl);
                })


                //动态商品点击事件
                var arr = new Array(CrumbData.length);
                arr.fill(0);
                //获取元素

                var oChooseArea = document.querySelectorAll('.chooseArea dl');

                // 遍历dl 
                oChooseArea.forEach(function (item, index) {
                    //遍历的时候赋值一个index
                    item.index = index;
                    // 获取dd
                    var oDd = item.querySelectorAll('dd');
                    // 遍历dd  然后点击事件
                    oDd.forEach(function (item, index) {

                        item.onclick = function () {
                            // 获取dd 改变颜色
                            oDd.forEach(function (item, index) {
                                item.style.color = '#666'
                            })
                            //    geiyanse
                            item.style.color = 'red'

                            arr[this.parentNode.index] = this;


                            var oChooseCon = document.querySelector(
                                '.chooseCon');
                            oChooseCon.innerHTML = '';

                            arr.forEach(function (item, index) {
                                if (item) {
                                    var oMark = document.createElement('mark')
                                    oMark.dataset.index = index;
                                    oMark.innerHTML = item.innerHTML;
                                    var x = document.createElement('span');
                                    x.innerHTML = 'X';
                                    oMark.appendChild(x);
                                    oChooseCon.appendChild(oMark)

                                }

                            })
                            // 删除
                            var ox = document.querySelectorAll('.chooseCon mark span')
                            ox.forEach(function (item, index) {
                                item.onclick = function () {
                                    oChooseCon.removeChild(this.parentNode);

                                    arr[this.parentNode.dataset.index] = 0;

                                    var odd = oChooseArea[this.parentNode
                                        .dataset.index].querySelectorAll(
                                        'dd')
                                    odd.forEach(function (item, index) {
                                        item.style.color = '#666'
                                    })
                                    odd[0].style.color = 'red';
                                    priceall(arr);
                                }

                            })
                            // 价格计算
                            priceall(arr);

                            function priceall(arr) {
                                //获取当前价钱

                                var nowprice = shangphui.goodsDetail.price * he.value;
                                // 改变价钱
                                arr.forEach(function (item, index) {

                                    if (item) {
                                        nowprice += parseFloat(item.dataset.price);
                                    }
                                    document.querySelector(
                                            '.price span:nth-child(2)').innerHTML =
                                        nowprice;
                                })
                                //加号  减号点击事件

                            }



                        }
                        var a = document.querySelector('.price span:nth-child(2)');
                        jiahao.onclick = function () {

                            var nowprice = shangphui.goodsDetail.price;

                            he.value++;

                            a.innerHTML = parseFloat(a.innerHTML) / (he.value - 1) * he
                                .value;

                        }
                        jianhao.onclick = function () {

                            var nowprice = shangphui.goodsDetail.price;
                            if (he.value <= 1) {
                                he.value = 1;
                            } else {
                                he.value--;
                                a.innerHTML = parseFloat(a.innerHTML) / (parseFloat(he
                                    .value) + 1) * he.value;
                            }


                        }

                    })

                })








            }

        })
    </script>
</body>

</html>